<!-- chat.html -->

<div id="chat-container">
    <div id="chat-history">
        <!-- Aici veți afișa istoricul conversațiilor -->
    </div>
    <div id="chat-input">
        <input type="text" id="user-input" placeholder="Scrieți aici..." required>
        <button id="send-button">Trimite</button>
    </div>
</div>

<script>
document.getElementById('send-button').addEventListener('click', function() {
    var userMessage = document.getElementById('user-input').value;
    var openaiApiKey = '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'; // Adăugați cheia API OpenAI aici
    var apiUrl = 'https://api.openai.com/v1/engines/text-davinci-002/completions';

    var xhr = new XMLHttpRequest();
    xhr.open('POST', apiUrl, true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.setRequestHeader('Authorization', 'Bearer ' + openaiApiKey);
    xhr.onload = function() {
        if (xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);
            var aiResponse = response.choices[0].text.strip();
            var chatHistory = document.getElementById('chat-history');
            chatHistory.innerHTML += '<div class="message">Utilizator: ' + userMessage + '</div>';
            chatHistory.innerHTML += '<div class="message">AI: ' + aiResponse + '</div>';
            document.getElementById('user-input').value = '';
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }
    };

    var data = {
        prompt: userMessage,
        max_tokens: 150
    };

    xhr.send(JSON.stringify(data));
});

</script>


